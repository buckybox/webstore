- title('Webstore - Customise', false)
= render 'webstore_sidebar'
= render partial: 'webstore_order', object: @webstore_order

= simple_form_for(:webstore_order, url: webstore_process_step_path) do |f|
  - if @box.customisable?
    .row-fluid.webstore-section
      .span10
        = f.simple_fields_for(:customise) do |g|
          #webstore-customise.inputs
            .row-fluid
              .span10= g.input :costomise, as: :boolean, label: 'customise my box'
            #webstore-customisations.row-fluid
              .span10
                .dislikes_input
                  = g.input :dislikes_input, label: 'Exclude these items', collection: @stock_list, input_html: { multiple: true, data: { placeholder: 'Exclude these items...' } }, required: false
                - if @box.likes?
                  .likes_input
                    = g.input :likes_input, label: 'Substitute for these items', collection: @stock_list, input_html: { multiple: true, data: { placeholder: 'Substitute for these items...' } }, required: false

  - if @box.extras_allowed?
    .row-fluid.webstore-section
      .span10
        = f.simple_fields_for(:extras) do |g|
          #webstore-extras.inputs
            .row-fluid
              .span10
                .row-fluid
                  .span12.important
                    - if @box.extras_unlimited?
                      Add any amount of extra items
                    - else
                      Add up to #{@box.extras_limit} extra items

                .row-fluid
                  %table.span12
                    %tbody
                      - @extras.each do |extra|
                        = render partial: 'extra', object: extra, locals: { g: g }
                      %tr
                        %td{ colspan: 3 }= g.input :add_extra, label: false, collection: @extras, label_method: :name_with_unit, input_html: { data: { placeholder: 'Add an extra item' } }, required: false

  .row-fluid
    .span12
      .actions= f.button :submit, 'Next', class: 'float-right'
